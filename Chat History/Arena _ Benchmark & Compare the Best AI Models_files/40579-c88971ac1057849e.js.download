!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._posthogChunkIds=e._posthogChunkIds||{},e._posthogChunkIds[n]="019c97ba-c8aa-7a21-8c16-a9abe5235d81")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40579],{6294:(e,a,t)=>{t.d(a,{a:()=>i});function i(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}},16468:(e,a,t)=>{t.d(a,{Fm:()=>g,Qs:()=>b,cj:()=>d,h:()=>m,qp:()=>f,yd:()=>u});var i=t(91147),n=t(7014),r=t(2088),l=t(7860),o=t(72949),s=t(55771);let d=n.bL;n.l9,n.bm;let u=n.ZL,c=s.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,i.jsx)(n.hJ,{className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 absolute inset-0 top-[var(--app-banner-height,0px)] z-50 bg-black/80",t),...r,ref:a})});c.displayName=n.hJ.displayName;let p=(0,o.F)("absolute z-50 gap-4 bg-background shadow-lg transition ease-spring data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-500 data-[state=open]:duration-500",{variants:{side:{left:"bottom-0 top-[var(--app-banner-height,0px)] left-0 data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left",right:"bottom-0 top-[var(--app-banner-height,0px)] right-0 data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right"}},defaultVariants:{side:"left"}}),m=s.forwardRef((e,a)=>{let{side:t="left",className:o,children:s,...d}=e;return(0,i.jsxs)(u,{container:(0,r.Xx)(),children:[(0,i.jsx)(c,{}),(0,i.jsxs)(n.UC,{ref:a,className:(0,l.cn)(p({side:t}),o),...d,children:[(0,i.jsx)(n.hE,{className:"sr-only",children:d.title}),(0,i.jsx)(n.VY,{className:"sr-only",children:d["aria-describedby"]}),s]})]})});m.displayName=n.UC.displayName;let g=e=>{let{className:a,...t}=e;return(0,i.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2",a),...t})};g.displayName="SheetHeader";let f=s.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,i.jsx)(n.hE,{ref:a,className:(0,l.cn)("text-foreground text-lg font-semibold",t),...r})});f.displayName=n.hE.displayName;let b=s.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,i.jsx)(n.VY,{ref:a,className:(0,l.cn)("text-muted-foreground text-sm",t),...r})});b.displayName=n.VY.displayName},24919:(e,a,t)=>{t.d(a,{E5:()=>b,Jg:()=>g.EEvaluationModality,K1:()=>g.EEvaluationSessionVisibility,PG:()=>g.EMessageRole,Qc:()=>p,Wt:()=>g.ELoginAuthProvider,ZA:()=>c,dJ:()=>s,lY:()=>g.EChatMode,nH:()=>i,qe:()=>f,sb:()=>g.EPairwiseFeedbackValue,ut:()=>g.EPointwiseFeedbackValue});var i,n,r,l,o,s,d,u,c,p,m=t(98805),g=t(52283);!function(e){e.PENDING="pending",e.SUCCESS="success",e.FAILED="failed",e.FLAGGED="flagged",e.RESAMPLING="resampling"}(i||(i={})),function(e){e.SYSTEM="system",e.USER="user",e.ASSISTANT="assistant",e.TOOL="tool"}(n||(n={}));let f="hasArenaError";(r||(r={})).PDF="application/pdf",function(e){e.USER_ID="user_id",e.USER_IP="user_ip",e.USER_ID_AND_IP="user_id_and_ip"}(l||(l={})),function(e){e.HEALTHY="healthy",e.UNHEALTHY="unhealthy"}(o||(o={})),function(e){e.ACTIVE="active",e.DEPRECATED="deprecated"}(s||(s={})),function(e){e.PUBLIC="public",e.PRIVATE="private"}(d||(d={})),function(e){e.PUBLIC="public",e.PRIVATE="private"}(u||(u={}));let b=m.k5(["text","vision","text-to-image","image-edit","multi-image-edit","code","image-to-code","search","text-to-video","image-to-video","video-to-video","document"]);!function(e){e.CREATE="create",e.UPDATE="update"}(c||(c={})),function(e){e.PENDING="pending",e.SCHEDULED="scheduled",e.PAUSED="paused",e.COMPLETED="completed",e.ARCHIVED="archived",e.CANCELLED="cancelled",e.REJECTED="rejected",e.PASSED_DEADLINE="passed_deadline"}(p||(p={}))},32001:(e,a,t)=>{t.d(a,{J:()=>i});let i=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter(e=>!!e).sort().join("_")}},33592:(e,a,t)=>{t.d(a,{GG:()=>d,Oe:()=>s,co:()=>u});var i=t(24919),n=t(3619),r=t(32001),l=t(81861),o=t(15392);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.lY.BATTLE,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Jg.CHAT,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{title:"New Chat",id:(0,n.generateSafeUUIDv7)(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),mode:e,modality:a,visibility:i.K1.PRIVATE,pairwiseFeedbacks:[],pointwiseFeedbacks:[],maskedEvaluations:[],messages:[],lastMessageIds:[],loading:!1,leftVoteHoverState:null,rightVoteHoverState:null,hasViewedLatestResponses:!1,isVoteSubmitting:!1,archivedAt:null,deletedAt:null,viewedWebDevPreviews:[],viewedVideos:[],didInspectBothResponsesByPairwiseFeedbackKey:{},isPredictingModality:!1,autoModalityMetadata:void 0,activeStreamController:null,isFastModeInProgress:!1,canResampleMessages:!1,startedFromAutoMode:t}},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s();return(0,o.y)()((a,t)=>({...e,initialize:e=>a(e),reset:e=>a({...s(),...e}),update:e=>a(e),addMessages:e=>{a(a=>({messages:[...a.messages,...e],lastMessageIds:e.map(e=>e.id),isFastModeInProgress:!1,canResampleMessages:!1}))},updateMessage:e=>{a(a=>({messages:a.messages.map(a=>a.id===e.id?{...a,...e}:a)}))},deleteMessage:e=>{a(a=>{var t;let i=a.messages.find(a=>a.id===e);return{messages:a.messages.filter(a=>a.id!==e),lastMessageIds:null!=(t=null==i?void 0:i.parentMessageIds)?t:a.lastMessageIds}})},setMode:e=>{a({mode:e})},setModality:e=>{a({modality:e})},addPairwiseFeedback:e=>{let{messageAId:t,messageBId:i,modelAId:r,modelBId:l,value:o,didInspectBothMobileHorizontalResponses:s}=e,d={id:(0,n.generateSafeUUIDv7)(),messageAId:t,messageBId:i,value:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),modelAId:null!=r?r:"",modelBId:null!=l?l:"",arenaId:"",didInspectBothMobileHorizontalResponses:s};return a(e=>{let a=u(e);return{pairwiseFeedbacks:[...e.pairwiseFeedbacks,d],messages:e.messages.map(e=>a.includes(e.id)?{...e,pairwiseFeedbackId:d.id}:e)}}),d},updatePairwiseFeedbackModels:e=>{let{pairwiseFeedbackId:i,modelAId:n,modelBId:r}=e;null!=t().pairwiseFeedbacks.find(e=>e.id===i)&&a(e=>({pairwiseFeedbacks:e.pairwiseFeedbacks.map(e=>e.id===i?{...e,modelAId:n,modelBId:r}:e),messages:e.messages.map(a=>a.pairwiseFeedbackId===i&&e.lastMessageIds.includes(a.id)?{...a,modelId:"a"===a.participantPosition?n:r}:a)}))},deletePairwiseFeedback:e=>{a(a=>({pairwiseFeedbacks:a.pairwiseFeedbacks.filter(a=>a.id!==e),messages:a.messages.map(a=>{let{pairwiseFeedbackId:t,...i}=a;return t===e?i:{...i,pairwiseFeedbackId:t}})}))},addPointwiseFeedback:e=>{let{messageId:t,modelId:i,value:r}=e,l={id:(0,n.generateSafeUUIDv7)(),messageId:t,modelId:i,value:r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return a(e=>({pointwiseFeedbacks:[...e.pointwiseFeedbacks,l],messages:e.messages.map(e=>e.id===t?{...e,pointwiseFeedbackId:l.id}:e)})),l},deletePointwiseFeedback:e=>{a(a=>({pointwiseFeedbacks:a.pointwiseFeedbacks.filter(a=>a.id!==e),messages:a.messages.map(a=>a.pointwiseFeedbackId===e?{...a,pointwiseFeedbackId:void 0}:a)}))},getPointwiseFeedbackById:e=>t().pointwiseFeedbacks.find(a=>a.id===e),setLeftVoteHoverState:e=>a({leftVoteHoverState:e}),setRightVoteHoverState:e=>a({rightVoteHoverState:e}),setHasViewedLatestResponses:e=>a({hasViewedLatestResponses:e}),setDidInspectBothMobileHorizontalResponses:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return a(a=>{let t=i.map(e=>"string"==typeof e?e:e.id),n=(0,r.J)(...t);return{didInspectBothResponsesByPairwiseFeedbackKey:{...a.didInspectBothResponsesByPairwiseFeedbackKey,[n]:e}}})},setIsVoteSubmitting:e=>a({isVoteSubmitting:e}),markWebDevPreviewAsViewed:e=>a(a=>a.viewedWebDevPreviews.includes(e)?a:{viewedWebDevPreviews:[...a.viewedWebDevPreviews,e]}),resetViewedWebDevPreviews:()=>a({viewedWebDevPreviews:[]}),markVideoAsViewed:e=>a(a=>a.viewedVideos.includes(e)?a:{viewedVideos:[...a.viewedVideos,e]}),resetViewedVideos:()=>a({viewedVideos:[]}),removeViewedVideo:e=>a(a=>({viewedVideos:a.viewedVideos.filter(a=>a!==e)})),setIsPredictingModality:e=>a({isPredictingModality:e}),setAutoModalityMetadata:e=>a({autoModalityMetadata:e}),setActiveStreamController:e=>a({activeStreamController:e}),startNewStream:()=>{var e;null==(e=t().activeStreamController)||e.abort();let i=new AbortController;return a({activeStreamController:i}),i},setIsFastModeInProgress:e=>a({isFastModeInProgress:e}),setCanResampleMessages:e=>a({canResampleMessages:e})}))},u=(0,l.Mz)([e=>e.messages,e=>e.lastMessageIds],(e,a)=>{var t,i;let n=e.filter(e=>"user"===e.role).reverse(),r=[...a],l=null==(t=e.find(e=>e.id===r[0]))?void 0:t.modelId,o=null==(i=e.find(e=>e.id===r[1]))?void 0:i.modelId;for(let a of n){let t=e.find(e=>{var t;return(null==(t=a.parentMessageIds)?void 0:t[0])===e.id}),i=e.find(e=>{var t;return(null==(t=a.parentMessageIds)?void 0:t[1])===e.id});if(null!=t&&null!=i&&(null==l||(null==t?void 0:t.modelId)===l)&&(null==o||(null==i?void 0:i.modelId)===o)&&(null==t?void 0:t.pairwiseFeedbackId)==null&&(null==i?void 0:i.pairwiseFeedbackId)==null)r.push(t.id),r.push(i.id);else break}return r})},37995:(e,a,t)=>{t.d(a,{F:()=>i});let i=(0,t(91790).hc)("/api")},39676:(e,a,t)=>{t.d(a,{Ck:()=>p,Es:()=>m,Ji:()=>g,L2:()=>l,Mw:()=>v,Tz:()=>u,Yz:()=>b,nU:()=>o,tH:()=>f,xA:()=>c});var i=t(24919),n=t(98805);let r=()=>e=>e;r()(n.Ik({id:n.Yj(),app_metadata:n.Ik({provider:n.Yj().optional()}).catchall(n.bz()),user_metadata:n.Ik({id:n.Yj().uuid().optional()}).catchall(n.bz()),aud:n.Yj(),confirmation_sent_at:n.Yj().optional(),recovery_sent_at:n.Yj().optional(),email_change_sent_at:n.Yj().optional(),new_email:n.Yj().optional(),new_phone:n.Yj().optional(),invited_at:n.Yj().optional(),action_link:n.Yj().optional(),email:n.Yj().optional(),phone:n.Yj().optional(),created_at:n.Yj(),confirmed_at:n.Yj().optional(),email_confirmed_at:n.Yj().optional(),phone_confirmed_at:n.Yj().optional(),last_sign_in_at:n.Yj().optional(),role:n.Yj().optional(),updated_at:n.Yj().optional(),identities:n.YO(n.Ik({id:n.Yj(),user_id:n.Yj(),identity_data:n.Ik({}).catchall(n.bz()).optional(),identity_id:n.Yj(),provider:n.Yj(),created_at:n.Yj().optional(),last_sign_in_at:n.Yj().optional(),updated_at:n.Yj().optional()})).optional(),is_anonymous:n.zM().optional(),factors:n.YO(n.Ik({id:n.Yj(),friendly_name:n.Yj().optional(),factor_type:n.k5(["totp","phone","webauthn"]),status:n.k5(["verified","unverified"]),created_at:n.Yj(),updated_at:n.Yj()})).optional()}));let l=n.YO(n.Ik({name:n.Yj().optional(),contentType:n.Yj().optional(),url:n.Yj(),thumbnailUrl:n.Yj().optional()})).optional(),o=n.fc(i.PG),s=n.fc(i.ut),d=n.fc(i.sb);n.Yj();let u=n.Ik({id:n.Yj().uuid(),messageId:n.Yj().uuid(),modelId:n.Yj().uuid(),value:s}),c=n.Ik({id:n.Yj().uuid(),messageAId:n.Yj().uuid(),messageBId:n.Yj().uuid(),value:d,modelAId:n.Yj().uuid(),modelBId:n.Yj().uuid(),arenaId:n.Yj().uuid(),didInspectBothMobileHorizontalResponses:n.zM().optional()}),p=n.Ik({id:n.Yj().uuid(),messageIds:n.YO(n.Yj().uuid()),modelIds:n.YO(n.Yj().uuid()),winningMessageId:n.Yj().uuid(),winningModelId:n.Yj().uuid()}),m=n.fc(i.K1),g=n.fc(i.lY),f=n.fc(i.Jg),b=r()(n.Ik({inputCapabilities:n.Ik({text:n.zM().optional(),image:n.zM().or(n.Ik({requiresUpload:n.zM().optional(),multipleImages:n.zM().optional()})).optional(),file:n.zM().optional(),video:n.zM().or(n.Ik({required:n.zM().optional()})).optional()}),outputCapabilities:n.Ik({text:n.zM().optional(),code:n.zM().optional(),web:n.zM().optional(),image:n.zM().or(n.Ik({aspectRatios:n.YO(n.Yj()).optional()})).optional(),video:n.zM().optional(),search:n.zM().optional()})})),v=n.Ik({title:n.Yj().optional(),favicon:n.Yj().optional(),thumbnail:n.Yj().optional(),url:n.Yj(),id:n.Yj(),charLocation:n.YO(n.ai()).optional()})},46373:(e,a,t)=>{t.d(a,{Gb:()=>h,AL:()=>A,Un:()=>_});var i,n=t(24919);let r=Object.keys({fast:{featureFlag:"fast-mode",supportedModalities:[n.Jg.CHAT,n.Jg.SEARCH,n.Jg.IMAGE]}});var l=t(56027);let o=l.z.object({error:l.z.string()});l.z.object({success:l.z.boolean()});var s=t(39676),d=t(75529);let u=l.z.object({hashedClientIp:l.z.string().optional(),clientCountry:l.z.string().optional(),clientAsn:l.z.string().optional(),botScore:l.z.string().optional(),isVerifiedBot:l.z.string().optional(),botDetectionIds:l.z.string().optional(),verifiedBotCategory:l.z.string().optional(),ja3:l.z.string().optional(),ja4:l.z.string().optional(),ja4_h2h3_ratio_1h:l.z.string().optional(),ja4_heuristic_ratio_1h:l.z.string().optional(),ja4_reqs_quantile_1h:l.z.string().optional(),ja4_uas_rank_1h:l.z.string().optional(),ja4_browser_ratio_1h:l.z.string().optional(),ja4_paths_rank_1h:l.z.string().optional(),ja4_reqs_rank_1h:l.z.string().optional(),ja4_cache_ratio_1h:l.z.string().optional(),ja4_ips_rank_1h:l.z.string().optional(),ja4_ips_quantile_1h:l.z.string().optional()}).catchall(l.z.unknown());(0,d.tA)()(l.z.object({messageId:l.z.string().uuid(),value:l.z.nativeEnum(n.ut),recaptchaV3Token:l.z.string().nullable(),cloudflareMetadata:u.optional()}));let c=(0,d.tA)()(s.Tz.openapi({example:{id:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa",messageId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaab",modelId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaac",value:n.ut.UPVOTE}}));(0,d.tA)()(l.z.object({value:l.z.nativeEnum(n.sb),messageAId:l.z.string().uuid(),messageBId:l.z.string().uuid(),evaluationSessionId:l.z.string().uuid(),turnstileToken:l.z.string().nullable(),recaptchaV3Token:l.z.string().nullable(),modelsRevealed:l.z.boolean().optional(),didInspectBothMobileHorizontalResponses:l.z.boolean().optional(),cloudflareMetadata:u.optional()}));let p=(0,d.tA)()(s.xA.openapi({example:{id:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa",messageAId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaab",messageBId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaac",modelAId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaad",modelBId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaae",value:n.sb.MODEL_A,arenaId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaf"}}));(0,d.tA)()(l.z.object({messageIds:l.z.array(l.z.string().uuid()),winningMessageId:l.z.string().uuid()})),(0,d.tA)()(s.Ck.openapi({example:{id:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa",messageIds:["aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaab","aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaac"],modelIds:["aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaad","aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaae"],winningMessageId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaf",winningModelId:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaag"}})),function(e){e.OK="OK",e.REDACT="REDACT",e.DROP="DROP"}(i||(i={})),i.REDACT,i.DROP;let m=["FINANCIAL_ID","CREDIT_CARD_DATA","AMERICAN_BANKERS_CUSIP_ID","VAT_NUMBER","US_EMPLOYER_IDENTIFICATION_NUMBER","MEDICAL_DATA","MEDICAL_ID","MEDICAL_RECORD_NUMBER","BLOOD_TYPE","MEDICAL_TERM","US_HEALTHCARE_NPI","GOVERNMENT_ID","PASSPORT","DRIVERS_LICENSE_NUMBER","PERSON_NAME","DATE_OF_BIRTH","PHONE_NUMBER","EMAIL_ADDRESS","STREET_ADDRESS","GEOGRAPHIC_DATA","IRELAND_EIRCODE","TECHNICAL_ID","MAC_ADDRESS","VEHICLE_IDENTIFICATION_NUMBER","SECURITY_DATA","FINLAND_BUSINESS_ID","JAPAN_CORPORATE_NUMBER","SPAIN_CIF_NUMBER","ETHNIC_GROUP","IMMIGRATION_STATUS","MARITAL_STATUS","POLITICAL_TERM","RELIGIOUS_TERM","SEXUAL_ORIENTATION","TRADE_UNION","DOCUMENT_TYPE/CONTEXT/FINANCE","DOCUMENT_TYPE/CONTEXT/HEALTH","DOCUMENT_TYPE/MEDICAL/RECORD","OBJECT_TYPE/PERSON/PASSPORT","OBJECT_TYPE/PERSON/PHOTO_ID_CARD"];[...m];let g=new Set(["OBJECT_TYPE/LICENSE_PLATE","PERSON_NAME","DATE_OF_BIRTH","GEOGRAPHIC_DATA"]);m.filter(e=>!g.has(e));var f=t(83993);let b=l.z.discriminatedUnion("type",[l.z.object({type:l.z.literal("text"),text:l.z.string()}),l.z.object({type:l.z.literal("file"),data:l.z.string(),mimeType:l.z.string(),filename:l.z.string().optional()}),l.z.object({type:l.z.literal("image"),image:l.z.unknown(),mimeType:l.z.string().optional()}),l.z.object({type:l.z.literal("reasoning"),text:l.z.string()}),l.z.object({type:l.z.literal("redacted-reasoning")}),l.z.object({type:l.z.literal("thinking"),signature:l.z.string(),thinking:l.z.string()}),l.z.object({type:l.z.literal("tool-call"),toolCallId:l.z.string(),toolName:l.z.string(),args:l.z.unknown()}),l.z.object({type:l.z.literal("tool-result"),toolCallId:l.z.string(),toolName:l.z.string(),result:l.z.unknown()}),l.z.object({type:l.z.literal("search"),text:l.z.string(),sources:l.z.array(l.z.unknown()).optional()}),l.z.object({type:l.z.literal("video"),url:l.z.string(),mimeType:l.z.string().optional(),thumbnailUrl:l.z.string().optional()})]),v=l.z.array(b),h=l.z.union([l.z.string(),l.z.array(l.z.discriminatedUnion("type",[l.z.object({type:l.z.literal("text"),text:l.z.string()}),l.z.object({type:l.z.literal("image"),image:l.z.string(),mimeType:l.z.string().optional()}),l.z.object({type:l.z.literal("file"),data:l.z.string(),filename:l.z.string().optional(),mimeType:l.z.string()})]))]),z=l.z.object({id:l.z.string().uuid(),evaluationSessionId:l.z.string().uuid(),evaluationId:l.z.string().uuid(),role:s.nU,parentMessageIds:l.z.array(l.z.string().uuid()),content:l.z.union([l.z.string(),v]),reasoning:l.z.string().optional(),experimental_attachments:s.L2,modelId:l.z.string().nullable().default(null),createdAt:l.z.string(),updatedAt:l.z.string(),participantPosition:l.z.enum(["a","b"]),pairwiseFeedbackId:l.z.string().optional(),pointwiseFeedbackId:l.z.string().optional(),status:l.z.nativeEnum(n.nH).default(n.nH.PENDING),failureReason:l.z.string().nullable().default(null),sources:l.z.array(s.Mw).optional(),metadata:l.z.record(l.z.string(),l.z.unknown()).optional()}),y=(0,d.tA)()(l.z.object({id:l.z.string().uuid(),modality:s.tH,arenaId:l.z.string().uuid()})),x=l.z.object({modality:s.tH,shouldShowModalitySuggestion:l.z.boolean(),suggestedModalities:l.z.array(s.tH),confidence:d.A6,disabledModalities:l.z.array(s.tH),latencyMs:l.z.number(),thresholds:d.kA,wasAutoSelected:l.z.boolean(),treatmentVariant:l.z.string().optional()}),w=l.z.object({previousEvaluationSessionId:l.z.string().uuid(),originalPredictedModality:s.tH,acceptedSuggestedModality:s.tH,originalConfidence:d.A6,userAcceptedSuggestion:l.z.boolean()}),I=l.z.object({isPresetPrompt:l.z.boolean().optional(),presetLabel:l.z.string().optional(),autoModalityMetadata:x.optional(),autoModalitySuggestionAcceptance:w.optional()}),E=l.z.object({content:h,experimental_attachments:s.L2.optional(),metadata:I.optional()}).refine(function(e){var a,t;let i,n=0;if("string"==typeof e.content)n=1,i=e.content;else{let t=["text","image","file"];if(e.content.some(e=>!t.includes(e.type)))return!1;let r=e.content.filter(e=>"text"===e.type);n=r.length,i=null==(a=r[0])?void 0:a.text}return!(1!==n||null==i||0===i.trim().length||(null!=(t=e.experimental_attachments)?t:[]).some(e=>{var a,t,i;let n=null!=(i=null==(a=e.contentType)?void 0:a.toLowerCase())?i:"";if(n.length>0&&(S.some(e=>n.startsWith(e))||M.has(n)))return!0;if(null==(t=e.url)?void 0:t.startsWith("data:")){let a=e.url.match(/^data:([^;,]+)/);if(a&&a[1]){let e=a[1].toLowerCase();if(S.some(a=>e.startsWith(a))||M.has(e)||e.includes("text"))return!0}}return!1}))},{message:"User message is invalid"}),j=l.z.object({id:l.z.string().uuid(),userMessage:E,mode:s.Ji,modality:s.tH,modelAId:l.z.string().uuid().optional(),modelBId:l.z.string().uuid().optional(),userMessageId:l.z.string().uuid(),modelAMessageId:l.z.string().uuid(),modelBMessageId:l.z.string().uuid().optional(),recaptchaV2Token:l.z.string().nullish(),recaptchaV3Token:l.z.string().nullish(),cloudflareMetadata:u.optional(),forceLowRecaptchaScore:l.z.boolean().optional(),webhook:l.z.object({url:l.z.string().url(),data:l.z.string().optional()}).optional()});l.z.object({}).openapi({}),l.z.object({id:l.z.string().uuid().openapi({param:{name:"id",in:"path"},example:"550e8400-e29b-41d4-a716-446655440000"})}),l.z.object({messageId:l.z.string().uuid().openapi({param:{name:"messageId",in:"path"},example:"7c9e6679-7425-40de-944b-e07fc1f90ae7"})}),l.z.object({id:l.z.string().uuid().openapi({param:{name:"id",in:"path"},example:"550e8400-e29b-41d4-a716-446655440000"})}),l.z.object({keepMessageContent:(0,d.Gv)(!1)});let A=(0,d.tA)()(l.z.object({id:l.z.string().uuid(),userId:l.z.string().uuid(),title:l.z.string(),mode:s.Ji,visibility:s.Es,lastMessageIds:l.z.array(l.z.string()),archivedAt:l.z.string().nullable(),deletedAt:l.z.string().nullable(),deletionPendingProcessing:l.z.boolean().nullable(),createdAt:l.z.string(),updatedAt:l.z.string(),messages:l.z.array(z),maskedEvaluations:l.z.array(y),pairwiseFeedbacks:l.z.array(p),pointwiseFeedbacks:l.z.array(c)})),_=l.z.object({id:l.z.string().uuid(),manifest:f.WebDevManifestSchema,previewUrl:l.z.string().url()});l.z.object({id:l.z.string().uuid().openapi({param:{name:"id",in:"path"},example:"550e8400-e29b-41d4-a716-446655440000"})}),j.omit({mode:!0}),l.z.object({}).openapi({}),l.z.object({}).openapi({}),l.z.object({evaluationSessionId:l.z.string().uuid().openapi({param:{name:"evaluationSessionId",in:"path"},example:"550e8400-e29b-41d4-a716-446655440000"}),messageId:l.z.string().uuid().openapi({param:{name:"messageId",in:"path"},example:"7c9e6679-7425-40de-944b-e07fc1f90ae7"})}),l.z.object({recaptchaV2Token:l.z.string().nullish(),recaptchaV3Token:l.z.string().nullish(),cloudflareMetadata:u.optional(),forceLowRecaptchaScore:l.z.boolean().optional()}),l.z.object({id:l.z.string().uuid().openapi({param:{name:"id",in:"path"},example:"550e8400-e29b-41d4-a716-446655440000"})}),l.z.object({modelAMessageId:l.z.string().uuid(),modelBMessageId:l.z.string().uuid(),strategy:l.z.enum(r),cloudflareMetadata:u.optional()}),l.z.object({}).openapi({}),l.z.object({evaluationSessionIds:l.z.array(l.z.string()),r2FilesDeleted:l.z.array(l.z.string()),r2Errors:l.z.array(l.z.string())}),l.z.object({id:l.z.string().uuid().openapi({param:{name:"id",in:"path"},example:"550e8400-e29b-41d4-a716-446655440000"})}),l.z.object({id:l.z.string().uuid(),archivedAt:l.z.string().nullable()}),o.extend({modelId:l.z.string().uuid().optional()}),l.z.object({severity:l.z.nativeEnum(i).optional(),stats:l.z.record(l.z.string(),l.z.number()).optional(),failed:l.z.boolean().optional(),failureReason:l.z.string().optional()});let S=["text/"],M=new Set(["application/json","application/xml","application/javascript","application/xhtml+xml","application/rtf","application/x-www-form-urlencoded","application/x-www-form-urlencoded;charset=utf-8","application/yaml","application/x-yaml","application/toml","application/csv","application/x-csv"])},46661:(e,a,t)=>{t.d(a,{Ie:()=>p,BI:()=>m,v$:()=>g});var i=t(99587),n=t(56027),r=t(52283);let l=n.z.object({history:n.z.array(n.z.object({id:n.z.string().uuid(),createdAt:n.z.string(),updatedAt:n.z.string(),title:n.z.string(),mode:n.z.nativeEnum(r.EChatMode),modality:n.z.nativeEnum(r.EEvaluationModality),modelAId:n.z.string().uuid().nullable(),modelBId:n.z.string().uuid().nullable(),archivedAt:n.z.string().nullable()})),pagination:n.z.object({hasMore:n.z.boolean(),cursor:n.z.string().nullable(),limit:n.z.number()})}).openapi({example:{history:[{id:"f47ac10b-58cc-4372-a567-0e02b2c3d479",createdAt:"2023-10-01T12:00:00Z",updatedAt:"2023-10-01T12:00:00Z",title:"Example History",mode:r.EChatMode.SIDE_BY_SIDE,modality:r.EEvaluationModality.CHAT,modelAId:"7c9e6679-7425-40de-944b-e07fc1f90ae7",modelBId:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",archivedAt:null}],pagination:{hasMore:!0,cursor:null,limit:50}}});n.z.object({cursor:n.z.string().nullable().default(null).transform(e=>"null"===e?null:e),limit:n.z.coerce.number().min(1).max(50).default(20),includeArchived:n.z.enum(["true","false"]).default("false").transform(e=>"true"===e),mode:n.z.nativeEnum(r.EChatMode).optional().transform(e=>null!=e?e:void 0),modality:n.z.nativeEnum(r.EEvaluationModality).optional().transform(e=>null!=e?e:void 0),archivedOnly:n.z.enum(["true","false"]).optional().transform(e=>"true"===e||"false"!==e&&void 0)}),n.z.object({q:n.z.string().min(1).max(500),includeArchived:n.z.enum(["true","false"]).default("false").transform(e=>"true"===e),cursor:n.z.string().nullable().default(null).transform(e=>"null"===e?null:e),limit:n.z.coerce.number().min(1).max(50).default(20),mode:n.z.nativeEnum(r.EChatMode).optional().transform(e=>null!=e?e:void 0),modality:n.z.nativeEnum(r.EEvaluationModality).optional().transform(e=>null!=e?e:void 0),archivedOnly:n.z.enum(["true","false"]).optional().transform(e=>"true"===e||"false"!==e&&void 0)});let o=n.z.object({id:n.z.string().uuid(),createdAt:n.z.string(),updatedAt:n.z.string(),title:n.z.string(),mode:n.z.nativeEnum(r.EChatMode),modality:n.z.nativeEnum(r.EEvaluationModality),modelAId:n.z.string().uuid().nullable(),modelBId:n.z.string().uuid().nullable(),matchedIn:n.z.enum(["title","message","both"]),archivedAt:n.z.string().nullable()}),s=n.z.object({results:n.z.array(o),pagination:n.z.object({hasMore:n.z.boolean(),cursor:n.z.string().nullable(),limit:n.z.number()})}).openapi({example:{results:[{id:"b3d7c6a5-8f12-4e3d-9c1b-5a7e2f8d4b6c",createdAt:"2023-10-01T12:00:00Z",updatedAt:"2023-10-01T12:00:00Z",title:"Example Search Result",mode:r.EChatMode.SIDE_BY_SIDE,modality:r.EEvaluationModality.CHAT,modelAId:"e5a9c2d1-3b7f-4a6e-8c2d-1f9b5e7a3c4d",modelBId:"c8f2e6b4-9d1a-4c3e-b5f7-2a8d6e4c1b9f",matchedIn:"title",archivedAt:null}],pagination:{hasMore:!1,cursor:null,limit:20}}});var d=t(37995);async function u(e){let{cursor:a,limit:t=20,includeArchived:i=!1,mode:n,modality:r,archivedOnly:o}=e,s=await d.F.history.list.$get({query:{cursor:null!=a?a:void 0,limit:t,includeArchived:i?"true":"false",mode:n,modality:r,archivedOnly:void 0!==o?o?"true":"false":void 0}});if(!s.ok){let e=await s.text();throw Error("Failed to fetch history (".concat(s.status,"): ").concat(e||"Unknown error"))}return l.parse(await s.json())}async function c(e){let{query:a,includeArchived:t,cursor:i,limit:n=20,mode:r,modality:l,archivedOnly:o}=e,u=await d.F.history.search.$get({query:{q:a,includeArchived:t?"true":"false",cursor:null!=i?i:void 0,limit:n,mode:r,modality:l,archivedOnly:void 0!==o?o?"true":"false":void 0}});if(!u.ok){let e=await u.text();throw Error("Failed to search history (".concat(u.status,"): ").concat(e||"Unknown error"))}return s.parse(await u.json())}let p="history",m=function(){let{includeArchived:e=!1,mode:a,modality:t,archivedOnly:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.L)({queryKey:[p,"list",{includeArchived:e,mode:a,modality:t,archivedOnly:n}],queryFn:async i=>{let{pageParam:r}=i;return u({cursor:r,limit:20,includeArchived:e,mode:a,modality:t,archivedOnly:n})},initialPageParam:null,getNextPageParam:e=>e.pagination.hasMore?e.pagination.cursor:null})},g=e=>{let{query:a,includeArchived:t,mode:n,modality:r,archivedOnly:l}=e;return(0,i.L)({queryKey:[p,"search",{query:a,includeArchived:t,mode:n,modality:r,archivedOnly:l}],queryFn:e=>{let{pageParam:i}=e;return c({query:a,includeArchived:t,cursor:i,mode:n,modality:r,archivedOnly:l})},initialPageParam:null,getNextPageParam:e=>e.pagination.hasMore?e.pagination.cursor:null,enabled:a.length>0})}},47009:(e,a,t)=>{t.d(a,{B:()=>u,m:()=>c});var i=t(43480),n=t(43161),r=t(55771),l=t(93514),o=t(99912),s=t(46661);let d=e=>e.pages.flatMap(e=>e.history);function u(e){let{enabled:a,includeArchived:t=!1,mode:n,modality:r,archivedOnly:o}=e,{data:u=[],hasNextPage:c,isFetchingNextPage:p,fetchNextPage:m,isLoading:g}=(0,i.useInfiniteQuery)({...(0,s.BI)({includeArchived:t,mode:n,modality:r,archivedOnly:o}),select:d,enabled:a}),{ref:f}=(0,l.Wx)({threshold:0,rootMargin:"100px",onChange(e){e&&c&&m()},skip:!a||!c||p});return{ref:f,history:u,hasNextPage:c,isLoading:g}}function c(){let e=(0,n.useQueryClient)(),a=(0,r.useCallback)(async a=>{await e.cancelQueries({queryKey:(0,s.BI)().queryKey}),e.setQueryData((0,s.BI)().queryKey,(0,o.w8)(a))},[e]);return{addHistory:a,updateHistory:(0,r.useCallback)(async a=>{await e.cancelQueries({queryKey:(0,s.BI)().queryKey}),e.setQueryData((0,s.BI)().queryKey,(0,o.uD)(a))},[e]),invalidateHistory:(0,r.useCallback)(()=>{e.invalidateQueries({queryKey:[s.Ie,"list"]})},[e])}}},47218:(e,a,t)=>{t.d(a,{WR:()=>n});var i=t(6294);function n(e){if(!e)return null;try{let t=e.split("/"),n=t.findIndex(e=>"c"===e);if(-1!==n&&n+1<t.length){var a;let e=null!=(a=t[n+1])?a:null;if(null==e||!(0,i.a)(e))return null;return e}return null}catch(e){return null}}},48636:(e,a,t)=>{t.d(a,{w:()=>l});var i=t(91147),n=t(15854),r=t(7860);let l=t(55771).forwardRef((e,a)=>{let{className:t,orientation:l="horizontal",decorative:o=!0,...s}=e,d=(null==t?void 0:t.includes("mx-"))||(null==t?void 0:t.includes("ml-"))||(null==t?void 0:t.includes("mr-"));return(0,i.jsx)(n.b,{ref:a,decorative:o,orientation:l,className:(0,r.cn)("bg-border-faint shrink-0","horizontal"===l?"h-[1px] ".concat(d?"w-auto":"w-full"):"h-full w-[1px]",t),...s})});l.displayName=n.b.displayName},52283:(e,a)=>{var t,i,n,r,l,o,s;Object.defineProperty(a,"__esModule",{value:!0}),a.EMessageRole=a.ELoginAuthProvider=a.EEvaluationSessionVisibility=a.EPairwiseFeedbackValue=a.EPointwiseFeedbackValue=a.EEvaluationModality=a.EChatMode=void 0,function(e){e.DIRECT="direct",e.DIRECT_BATTLE="direct-battle",e.SIDE_BY_SIDE="side-by-side",e.BATTLE="battle"}(t||(a.EChatMode=t={})),function(e){e.AUTO="auto",e.CHAT="chat",e.WEBDEV="webdev",e.SEARCH="search",e.IMAGE="image",e.P2L="p2l",e.VIDEO="video",e.AUDIO="audio"}(i||(a.EEvaluationModality=i={})),function(e){e.UPVOTE="upvote",e.DOWNVOTE="downvote"}(n||(a.EPointwiseFeedbackValue=n={})),function(e){e.MODEL_A="model_a",e.MODEL_B="model_b",e.TIE="tie",e.BOTH_BAD="both_bad"}(r||(a.EPairwiseFeedbackValue=r={})),function(e){e.PUBLIC="public",e.PRIVATE="private"}(l||(a.EEvaluationSessionVisibility=l={})),function(e){e.EMAIL="email",e.GOOGLE="google"}(o||(a.ELoginAuthProvider=o={})),function(e){e.SYSTEM="system",e.USER="user",e.ASSISTANT="assistant",e.DATA="data"}(s||(a.EMessageRole=s={}))},52808:(e,a,t)=>{t.d(a,{I:()=>u,M5:()=>g,SQ:()=>f,_2:()=>b,dc:()=>c,lp:()=>v,lv:()=>p,mB:()=>h,nV:()=>m,rI:()=>s,ty:()=>d});var i=t(91147),n=t(13071),r=t(41568),l=t(7860),o=t(55771);let s=n.bL,d=n.l9,u=n.YJ,c=n.ZL,p=n.Pb;n.z6;let m=o.forwardRef((e,a)=>{let{className:t,inset:o,children:s,...d}=e;return(0,i.jsxs)(n.ZP,{ref:a,className:(0,l.cn)("flex cursor-pointer select-none items-center gap-2 rounded px-2 py-1.5 text-xs outline-none hover:bg-neutral-100 focus:bg-neutral-100 data-[state=open]:bg-neutral-100 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800 dark:data-[state=open]:bg-neutral-800 [&_svg]:pointer-events-none [&_svg]:size-3.5 [&_svg]:shrink-0",o&&"pl-8",t),...d,children:[s,(0,i.jsx)(r.ChevronRight,{className:"ml-auto"})]})});m.displayName=n.ZP.displayName;let g=o.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,i.jsx)(n.G5,{ref:a,className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-[--radix-dropdown-menu-content-transform-origin] overflow-hidden rounded-md border border-neutral-200 bg-white p-1 text-neutral-900 shadow-md dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-50",t),...r})});g.displayName=n.G5.displayName;let f=o.forwardRef((e,a)=>{let{className:t,sideOffset:r=4,...o}=e;return(0,i.jsx)(n.ZL,{children:(0,i.jsx)(n.UC,{ref:a,sideOffset:r,className:(0,l.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border border-neutral-200 bg-white p-1 text-neutral-900 shadow-md dark:border-neutral-700 dark:bg-neutral-950 dark:text-neutral-50","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...o})})});f.displayName=n.UC.displayName;let b=o.forwardRef((e,a)=>{let{className:t,inset:r,...o}=e;return(0,i.jsx)(n.q7,{ref:a,className:(0,l.cn)("relative flex cursor-pointer select-none items-center gap-2 rounded px-2 py-1.5 text-xs outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-3.5 [&>svg]:shrink-0","hover:bg-surface-tertiary focus:bg-surface-tertiary",r&&"pl-8",t),...o})});b.displayName=n.q7.displayName,o.forwardRef((e,a)=>{let{className:t,children:o,checked:s,...d}=e;return(0,i.jsxs)(n.H_,{ref:a,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded py-1.5 pl-8 pr-2 text-xs outline-none transition-colors hover:bg-neutral-100 focus:bg-neutral-100 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800",t),checked:s,...d,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(n.VF,{children:(0,i.jsx)(r.Check,{className:"h-4 w-4"})})}),o]})}).displayName=n.H_.displayName,o.forwardRef((e,a)=>{let{className:t,children:o,...s}=e;return(0,i.jsxs)(n.hN,{ref:a,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded py-1.5 pl-8 pr-2 text-xs outline-none transition-colors hover:bg-neutral-100 focus:bg-neutral-100 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800",t),...s,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(n.VF,{children:(0,i.jsx)(r.Circle,{className:"h-2 w-2 fill-current"})})}),o]})}).displayName=n.hN.displayName;let v=o.forwardRef((e,a)=>{let{className:t,inset:r,...o}=e;return(0,i.jsx)(n.JU,{ref:a,className:(0,l.cn)("px-2 py-1.5 text-xs font-semibold",r&&"pl-8",t),...o})});v.displayName=n.JU.displayName;let h=o.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,i.jsx)(n.wv,{ref:a,className:(0,l.cn)("-mx-1 my-1 h-px bg-neutral-100 dark:bg-neutral-700",t),...r})});h.displayName=n.wv.displayName},55877:(e,a)=>{function t(e){return null!=e&&!0!==e&&!1!==e?e:void 0}a.Bi=function(e){var a;return(null==(a=t(e))?void 0:a.required)===!0},a.U1=function(e){return!0===e||null!=t(e)}},61956:(e,a,t)=>{t.d(a,{E:()=>p,Y:()=>c});var i=t(91147),n=t(2088),r=t(51491),l=t(73647),o=t(55771);function s(){let e=document.cookie.split("; ").find(e=>e.startsWith("".concat(n.pC.appBannerState,"=")));if(!e)return null;let a=e.split("=")[1];if(!a)return null;try{return JSON.parse(decodeURIComponent(a))}catch(e){return null}}function d(e){let a=encodeURIComponent(JSON.stringify(e));document.cookie="".concat(n.pC.appBannerState,"=").concat(a,"; max-age=31536000; path=/; secure; samesite=lax")}let u=(0,o.createContext)(null);function c(){let e=(0,o.useContext)(u);if(!e)throw Error("useBanner must be used within BannerProvider");return e}function p(e){let{children:a,canShowAppBanner:t}=e,n=(0,l._P)("app-banner-enabled"),[c,p]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(t&&n&&!c){let e=s();e&&e.id&&e.id===r.ap.id||d({id:r.ap.id,firstSeenTimestamp:Date.now()})}},[t,n,c]);let m=(0,o.useCallback)(()=>{let e=function(){var e;let a=s();return null!=(e=null==a?void 0:a.firstSeenTimestamp)?e:Date.now()}();d({id:r.ap.id,firstSeenTimestamp:e,dismissedTimestamp:Date.now()}),p(!0)},[]),g=(0,o.useMemo)(()=>!!n&&t&&!c,[n,t,c]);return(0,i.jsx)(u.Provider,{value:{shouldShow:g,dismiss:m,config:r.ap},children:(0,i.jsx)("div",{style:{"--app-banner-height":g?"".concat(r.ap.height,"px"):"0px"},children:a})})}},62770:(e,a,t)=>{t.d(a,{$j:()=>s,PY:()=>d,SO:()=>p,Zg:()=>o,Zt:()=>c,cp:()=>u});var i=t(24919);let n=["text","image","search","video","code"],r=["side-by-side","direct"];function l(e){return r.includes(e)}function o(e){switch(e){case"text":return i.Jg.CHAT;case"image":return i.Jg.IMAGE;case"search":return i.Jg.SEARCH;case"video":return i.Jg.VIDEO;case"code":return i.Jg.WEBDEV}}function s(e,a){switch(e){case"side-by-side":return i.lY.SIDE_BY_SIDE;case"direct":return a?i.lY.DIRECT_BATTLE:i.lY.DIRECT}}function d(e,a){let t=function(e){switch(e){case i.Jg.CHAT:return"text";case i.Jg.IMAGE:return"image";case i.Jg.SEARCH:return"search";case i.Jg.VIDEO:return"video";case i.Jg.WEBDEV:return"code";case i.Jg.AUDIO:case i.Jg.AUTO:case i.Jg.P2L:default:return null}}(e);if(!t)return"/";let n=a?function(e){switch(e){case i.lY.SIDE_BY_SIDE:return"side-by-side";case i.lY.DIRECT:case i.lY.DIRECT_BATTLE:return"direct";case i.lY.BATTLE:default:return null}}(a):null;return n?"/".concat(t,"/").concat(n):"/".concat(t)}function u(e){let a=e.replace(/^\//,"").split("/"),t=a[0],i=a[1],r=t&&n.includes(t)?t:null,o=r&&i&&l(i)?i:null;return r?{modalitySlug:r,modeSlug:o}:t&&l(t)?{modalitySlug:"text",modeSlug:t}:"max"===t?{modalitySlug:"text",modeSlug:"direct"}:{modalitySlug:null,modeSlug:null}}function c(e){let{modalitySlug:a}=u(e);return null!=a}function p(e){return"/"===e||c(e)}},67487:(e,a)=>{a.EC=a.ue=a.Kd=a.qP=void 0,a.qP="boss-bandit",a.Kd=12e4,a.ue=2500,a.EC=["application/pdf"]},69213:(e,a,t)=>{t.d(a,{Bx:()=>w,CG:()=>A,Cn:()=>M,FX:()=>R,GB:()=>x,GX:()=>_,Gh:()=>j,I0:()=>z,SidebarInset:()=>E,Uj:()=>D,Yv:()=>S,cL:()=>y,e7:()=>P,jM:()=>I,jj:()=>N,rQ:()=>C,wZ:()=>k});var i=t(91147),n=t(18468),r=t(41568),l=t(31959),o=t(77585),s=t(48636),d=t(16468),u=t(73566),c=t(42328),p=t(2088),m=t(5269),g=t(51491),f=t(7860),b=t(61956),v=t(72949),h=t(55771);let z=h.createContext(null);function y(){let e=h.useContext(z);if(!e)throw Error("useSidebar must be used within a SidebarProvider.");return e}let x=h.forwardRef((e,a)=>{let{defaultOpen:t=!0,open:n,onOpenChange:r,className:l,style:o,children:s,...d}=e,u=(0,m.d)("md"),[c,g]=h.useState(!1),[b,v]=h.useState(t),y=null!=n?n:b,x=h.useCallback(e=>{let a="function"==typeof e?e(y):e;r?r(a):v(a),document.cookie="".concat(p.pC.sidebarState,"=").concat(a,"; path=/; max-age=").concat(604800)},[r,y]),w=h.useCallback(()=>u?g(e=>!e):x(e=>!e),[u,x,g]);h.useEffect(()=>{let e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),w())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[w]);let I=y?"expanded":"collapsed",E=h.useMemo(()=>({state:I,open:y,setOpen:x,isMobile:u,openMobile:c,setOpenMobile:g,toggleSidebar:w}),[I,y,x,u,c,g,w]);return(0,i.jsx)(z.Provider,{value:E,children:(0,i.jsx)("div",{style:{"--sidebar-width":"240px","--sidebar-width-icon":"3.5rem",...o},className:(0,f.cn)("group/sidebar-wrapper has-[[data-variant=inset]]:bg-sidebar flex min-h-svh w-full",l),ref:a,...d,children:s})})});x.displayName="SidebarProvider";let w=h.forwardRef((e,a)=>{let{side:t="left",variant:n="sidebar",collapsible:r="offcanvas",className:l,children:o,...s}=e,{isMobile:u,state:c,openMobile:p,setOpenMobile:m}=y(),{shouldShow:v}=(0,b.Y)();return"none"===r?(0,i.jsx)("div",{className:(0,f.cn)("bg-sidebar text-sidebar-foreground flex h-screen w-[--sidebar-width] flex-col",l),ref:a,...s,children:o}):u?(0,i.jsx)(d.cj,{open:p,onOpenChange:m,...s,children:(0,i.jsxs)(d.h,{"data-sidebar":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-[--sidebar-width] p-0 [&>button]:hidden",style:{"--sidebar-width":"80vw"},side:t,onPointerDownOutside:e=>{e.target.closest('[data-banner="'.concat(g.VJ,'"]'))&&e.preventDefault()},children:[(0,i.jsxs)(d.Fm,{className:"sr-only",children:[(0,i.jsx)(d.qp,{children:"Sidebar"}),(0,i.jsx)(d.Qs,{children:"Displays the mobile sidebar."})]}),(0,i.jsx)("div",{className:"flex h-full w-full flex-col",children:o})]})}):(0,i.jsxs)("div",{ref:a,className:"text-sidebar-foreground group peer hidden md:block","data-state":c,"data-collapsible":"collapsed"===c?r:"","data-variant":n,"data-side":t,children:[(0,i.jsx)("div",{className:(0,f.cn)("relative w-[--sidebar-width] bg-transparent transition-[width] duration-100 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===n||"inset"===n?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),(0,i.jsx)("div",{className:(0,f.cn)("fixed bottom-0 z-10 hidden w-[--sidebar-width] transition-[left,right,width] duration-100 ease-linear md:flex",v?"top-[var(--app-banner-height,0px)]":"top-0","left"===t?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===n||"inset"===n?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"border-border-faint group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",l),...s,children:(0,i.jsx)("div",{"data-sidebar":"sidebar",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col overflow-hidden group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow",children:o})})]})});w.displayName="Sidebar",h.forwardRef((e,a)=>{let{className:t,onClick:n,...o}=e,{toggleSidebar:s}=y();return(0,i.jsxs)(l.Button,{ref:a,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:(0,f.cn)("h-7 w-7",t),onClick:e=>{null==n||n(e),s()},...o,children:[(0,i.jsx)(r.PanelLeft,{}),(0,i.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})}).displayName="SidebarTrigger";let I=h.forwardRef((e,a)=>{let{className:t,...n}=e,{toggleSidebar:r}=y();return(0,i.jsx)("button",{ref:a,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:(0,f.cn)("hover:after:bg-sidebar-border absolute inset-y-0 z-50 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:hover:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...n})});I.displayName="SidebarRail";let E=h.forwardRef((e,a)=>{let{className:t,...n}=e,{shouldShow:r}=(0,b.Y)();return(0,i.jsx)("main",{ref:a,className:(0,f.cn)("bg-background relative flex min-h-svh w-full flex-1 flex-col overflow-x-auto","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",r?"pt-[var(--app-banner-height,0px)]":"",t),...n})});E.displayName="SidebarInset",h.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,i.jsx)(o.p,{ref:a,"data-sidebar":"input",className:(0,f.cn)("bg-background focus-visible:ring-sidebar-ring h-8 w-full shadow-none focus-visible:ring-2",t),...n})}).displayName="SidebarInput";let j=h.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,i.jsx)("div",{ref:a,"data-sidebar":"header",className:(0,f.cn)("flex flex-col gap-2 p-2",t),...n})});j.displayName="SidebarHeader";let A=h.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,i.jsx)("div",{ref:a,"data-sidebar":"footer",className:(0,f.cn)("flex flex-col gap-2 p-2",t),...n})});A.displayName="SidebarFooter";let _=h.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,i.jsx)(s.w,{ref:a,"data-sidebar":"separator",className:(0,f.cn)("bg-sidebar-border mx-2 w-auto",t),...n})});_.displayName="SidebarSeparator";let S=h.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,i.jsx)("div",{ref:a,"data-sidebar":"content",className:(0,f.cn)("flex min-h-0 flex-1 flex-col gap-2 overflow-y-auto overflow-x-hidden group-data-[collapsible=icon]:overflow-hidden",t),...n})});S.displayName="SidebarContent";let M=h.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,i.jsx)("div",{ref:a,"data-sidebar":"group",className:(0,f.cn)("relative flex w-full min-w-0 flex-col p-2",t),...n})});M.displayName="SidebarGroup";let N=h.forwardRef((e,a)=>{let{className:t,asChild:r=!1,...l}=e,o=r?n.DX:"div";return(0,i.jsx)(o,{ref:a,"data-sidebar":"group-label",className:(0,f.cn)("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-none transition-[margin,opacity] duration-150 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...l})});N.displayName="SidebarGroupLabel",h.forwardRef((e,a)=>{let{className:t,asChild:r=!1,...l}=e,o=r?n.DX:"button";return(0,i.jsx)(o,{ref:a,"data-sidebar":"group-action",className:(0,f.cn)("text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-none transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...l})}).displayName="SidebarGroupAction";let C=h.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,i.jsx)("div",{ref:a,"data-sidebar":"group-content",className:(0,f.cn)("w-full text-sm",t),...n})});C.displayName="SidebarGroupContent";let k=h.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,i.jsx)("ul",{ref:a,"data-sidebar":"menu",className:(0,f.cn)("flex w-full min-w-0 flex-col gap-1",t),...n})});k.displayName="SidebarMenu";let R=h.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,i.jsx)("li",{ref:a,"data-sidebar":"menu-item",className:(0,f.cn)("group/menu-item relative","group-data-[collapsible=icon]:flex group-data-[collapsible=icon]:justify-center",t),...n})});R.displayName="SidebarMenuItem";let T=(0,v.F)("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>span]:group-data-[collapsible=icon]:hidden",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-base",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),D=h.forwardRef((e,a)=>{let{asChild:t=!1,isActive:r=!1,variant:l="default",size:o="default",tooltip:s,className:d,...u}=e,p=t?n.DX:"button",{isMobile:m,state:g}=y(),b=(0,i.jsx)(p,{ref:a,"data-sidebar":"menu-button","data-size":o,"data-active":r,className:(0,f.cn)(T({variant:l,size:o}),"group-data-[collapsible=icon]:transition-none","data-[active=true]:font-normal",d),...u});return s?("string"==typeof s&&(s={children:s}),(0,i.jsxs)(c.m_,{children:[(0,i.jsx)(c.k$,{asChild:!0,children:b}),(0,i.jsx)(c.ZI,{side:"right",align:"center",hidden:"collapsed"!==g||m,...s})]})):b});D.displayName="SidebarMenuButton";let P=h.forwardRef((e,a)=>{let{className:t,asChild:r=!1,showOnHover:l=!1,...o}=e,s=r?n.DX:"button";return(0,i.jsx)(s,{ref:a,"data-sidebar":"menu-action",className:(0,f.cn)("text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-none transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",l&&"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0",t),...o})});P.displayName="SidebarMenuAction",h.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,i.jsx)("div",{ref:a,"data-sidebar":"menu-badge",className:(0,f.cn)("text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...n})}).displayName="SidebarMenuBadge",h.forwardRef((e,a)=>{let{className:t,showIcon:n=!1,...r}=e,l=h.useMemo(()=>"".concat(Math.floor(40*Math.random())+50,"%"),[]);return(0,i.jsxs)("div",{ref:a,"data-sidebar":"menu-skeleton",className:(0,f.cn)("flex h-8 items-center gap-2 rounded-md px-2",t),...r,children:[n&&(0,i.jsx)(u.E,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),(0,i.jsx)(u.E,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":l}})]})}).displayName="SidebarMenuSkeleton",h.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,i.jsx)("ul",{ref:a,"data-sidebar":"menu-sub",className:(0,f.cn)("border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...n})}).displayName="SidebarMenuSub",h.forwardRef((e,a)=>{let{...t}=e;return(0,i.jsx)("li",{ref:a,...t})}).displayName="SidebarMenuSubItem",h.forwardRef((e,a)=>{let{asChild:t=!1,size:r="md",isActive:l,className:o,...s}=e,d=t?n.DX:"a";return(0,i.jsx)(d,{ref:a,"data-sidebar":"menu-sub-button","data-size":r,"data-active":l,className:(0,f.cn)("text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===r&&"text-xs","md"===r&&"text-sm","group-data-[collapsible=icon]:hidden",o),...s})}).displayName="SidebarMenuSubButton"},75529:(e,a,t)=>{a.kA=a.A6=a.Gv=a.tA=void 0;let i=t(36573);a.tA=()=>e=>e,a.Gv=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return i.z.union([i.z.boolean(),i.z.string()]).transform(a=>"boolean"==typeof a?a:"true"===a||"false"!==a&&e).optional().default(e)},a.A6=i.z.object({image:i.z.number(),search:i.z.number(),text:i.z.number(),video:i.z.number(),code:i.z.number()}),a.kA=i.z.object({IMAGE:i.z.number(),VIDEO:i.z.number(),SEARCH:i.z.number(),CODE:i.z.number()}),i.z.object({user_prompt:i.z.string().min(1),has_image:i.z.boolean().optional().default(!1)}),i.z.object({predicted_modality:i.z.string(),probabilities:a.A6})},77585:(e,a,t)=>{t.d(a,{p:()=>r});var i=t(91147),n=t(7860);let r=t(55771).forwardRef((e,a)=>{let{className:t,type:r,...l}=e;return(0,i.jsx)("input",{type:r,className:(0,n.cn)("border-border file:text-foreground placeholder:text-text-placeholder focus-visible:ring-ring focus-visible:ring-offset-surface-primary flex h-9 w-full rounded-md border bg-transparent px-3 py-2 text-base transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 sm:text-sm",t),ref:a,...l})});r.displayName="Input"},80336:(e,a,t)=>{t.d(a,{D_:()=>p,H3:()=>g,HI:()=>m,JQ:()=>h,Jo:()=>z,RS:()=>f,S1:()=>u,cK:()=>v,hK:()=>d,j4:()=>b,oN:()=>c});var i=t(24919),n=t(39676),r=t(56027),l=t(55877);let o=(0,t(75529).tA)()(r.z.object({id:r.z.string().uuid(),organization:r.z.string().optional(),provider:r.z.string().optional(),publicName:r.z.string(),name:r.z.string().nullable().optional(),displayName:r.z.string().optional(),capabilities:n.Yz.nullable(),rank:r.z.number().optional()})),s={id:"uuid-v4",publicName:"awesome model",name:"awesome model name",displayName:"awesome model official name",organization:"example org",provider:"example provider",capabilities:null};function d(e){var a,t;return!!((null==(a=e.capabilities)?void 0:a.inputCapabilities.text)&&(null==(t=e.capabilities)?void 0:t.outputCapabilities.image))}function u(e){var a,t,i;return!!((null==(a=e.capabilities)?void 0:a.inputCapabilities.text)&&(null==(t=e.capabilities)?void 0:t.inputCapabilities.image)&&(null==(i=e.capabilities)?void 0:i.outputCapabilities.text))}function c(e){var a,t,i,n;return!!((null==(t=e.capabilities)||null==(a=t.inputCapabilities)?void 0:a.text)&&(null==(n=e.capabilities)||null==(i=n.outputCapabilities)?void 0:i.text))}function p(e){var a,t,i;let n=null==(a=e.capabilities)?void 0:a.inputCapabilities.video,r=(0,l.Bi)(n);return!!((null==(t=e.capabilities)?void 0:t.inputCapabilities.text)&&(null==(i=e.capabilities)?void 0:i.outputCapabilities.video)&&!r)}function m(e){var a,t,i;let n=null==(a=e.capabilities)?void 0:a.inputCapabilities.video,r=(0,l.Bi)(n);return!!((null==(t=e.capabilities)?void 0:t.inputCapabilities.image)&&(null==(i=e.capabilities)?void 0:i.outputCapabilities.video)&&!r)}function g(e){var a,t;return!!((null==(a=e.capabilities)?void 0:a.inputCapabilities.video)&&(null==(t=e.capabilities)?void 0:t.outputCapabilities.video))}function f(e){var a,t,i,n,r,l;return!!((null==(t=e.capabilities)||null==(a=t.inputCapabilities)?void 0:a.text)&&(null==(n=e.capabilities)||null==(i=n.inputCapabilities)?void 0:i.file)&&(null==(l=e.capabilities)||null==(r=l.outputCapabilities)?void 0:r.text))}function b(e){var a,t,i;return!!((null==(a=e.capabilities)?void 0:a.inputCapabilities.text)&&(null==(t=e.capabilities)?void 0:t.inputCapabilities.image)&&(null==(i=e.capabilities)?void 0:i.outputCapabilities.image))}function v(e){var a,t;return!!((null==(a=e.capabilities)?void 0:a.inputCapabilities.text)&&(null==(t=e.capabilities)?void 0:t.outputCapabilities.search))}function h(e){var a,t;return!!((null==(a=e.capabilities)?void 0:a.inputCapabilities.text)&&(null==(t=e.capabilities)?void 0:t.outputCapabilities.web))}function z(e){var a,t,i;return!!((null==(a=e.capabilities)?void 0:a.inputCapabilities.text)&&(null==(t=e.capabilities)?void 0:t.inputCapabilities.image)===!0&&(null==(i=e.capabilities)?void 0:i.outputCapabilities.web))}r.z.object({models:r.z.array(o)}).openapi({example:{models:[s]}}),r.z.object({chatModality:r.z.nativeEnum(i.Jg).optional(),sortBy:r.z.enum(["default","leaderboard_score"]).optional(),arenaSlug:i.E5.optional()}),r.z.object({id:r.z.string().uuid().openapi({param:{name:"id",in:"path"},example:"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"})}),o.openapi({example:s}),r.z.object({prompt:r.z.string().min(1).openapi({example:"Write a professional email about project updates",description:"The prompt to send to the model for testing"}),apiModelName:r.z.string().min(1).openapi({example:"gpt-4o",description:"The API model name to test"}),provider:r.z.string().min(1).openapi({example:"openai",description:"The provider for the model"}),inferenceSettings:r.z.record(r.z.unknown()).optional().openapi({description:"Optional inference settings to override defaults (temperature, maxTokens, etc.)"}),capabilities:n.Yz})},83993:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WebDevPartSchema=a.WebDevManifestSchema=a.BuildResultSchema=a.BuildTemplateSchema=a.WebDevFileSchema=void 0;let i=t(87953),n=i.z.enum(["text/html","text/javascript","text/css","text/markdown","application/json","text/plain"]);a.WebDevFileSchema=i.z.object({path:i.z.string(),content:i.z.string(),contentType:n});let r=i.z.object({kind:i.z.literal("vanilla")}),l=i.z.object({kind:i.z.literal("react-vite-tailwind")});a.BuildTemplateSchema=i.z.discriminatedUnion("kind",[r,l]);let o=i.z.object({status:i.z.literal("success")}),s=i.z.object({status:i.z.literal("error"),message:i.z.string()}),d=i.z.object({evaluationSessionId:i.z.string().uuid()}).partial();a.BuildResultSchema=i.z.discriminatedUnion("status",[o,s]),a.WebDevManifestSchema=i.z.object({v:i.z.literal(1),template:a.BuildTemplateSchema,files:i.z.array(a.WebDevFileSchema),buildResult:a.BuildResultSchema,metadata:d.default({})}),a.WebDevPartSchema=i.z.object({type:i.z.literal("webdev"),event:i.z.discriminatedUnion("type",[i.z.object({type:i.z.literal("init"),files:i.z.array(a.WebDevFileSchema)}),i.z.object({type:i.z.literal("title"),title:i.z.string()})])})},86291:(e,a,t)=>{t.d(a,{E:()=>p,Z:()=>d});var i=t(91147),n=t(25886),r=t(714),l=t(27982),o=t(55771),s=t(27069);function d(e){let{icon:a,message:t,onUndo:n,sidebarOpen:r,theme:l}=e;(0,s.oR)((0,i.jsxs)("div",{className:"flex items-center gap-2",children:[a,(0,i.jsx)("span",{children:t})]}),{position:"top-center",style:{marginTop:"3rem",marginLeft:r?"120px":void 0,backgroundColor:"hsl(var(--surface-primary))"},action:{label:"Undo",onClick:n},actionButtonStyle:{backgroundColor:"dark"===l?"white":"black",color:"dark"===l?"black":"white"}})}function u(e){let a=(0,n.rd)(),t=(0,l.useSearchParams)();(0,o.useEffect)(()=>{let i=t.get(e);if(i){let n=decodeURIComponent(i);"error"===e?s.oR.error(n):"success"===e?s.oR.success(n):"message"===e&&s.oR.info(n);let r=new URLSearchParams(t);r.delete(e);let l=r.toString()?"".concat(window.location.pathname,"?").concat(r.toString()):window.location.pathname;a.replace(l)}},[t,a,e])}let c={style:{fontFamily:"var(--font-basel-grotesk), ui-sans-serif, system-ui, sans-serif",backgroundColor:"hsl(var(--surface-secondary))",borderColor:"hsl(var(--border-medium))",color:"hsl(var(--text-primary))"},classNames:{title:"!font-rebrand-serif !font-light !tracking-[-0.025em] !text-[hsl(var(--text-primary))]",description:"!-mt-1 !text-[hsl(var(--text-secondary))]",error:"!bg-[hsl(var(--interactive-negative)/0.1)] !border-[hsl(var(--interactive-negative)/0.3)] [&_[data-icon]>svg]:!text-[hsl(var(--interactive-negative))] [&_[data-title]]:!text-[hsl(var(--interactive-negative))]",warning:"!bg-[hsl(var(--interactive-warning)/0.1)] !border-[hsl(var(--interactive-warning)/0.3)] [&_[data-icon]>svg]:!text-[hsl(var(--interactive-warning))] [&_[data-title]]:!text-[hsl(var(--interactive-warning))]",success:"!bg-[hsl(var(--interactive-positive)/0.1)] !border-[hsl(var(--interactive-positive)/0.3)] [&_[data-icon]>svg]:!text-[hsl(var(--interactive-positive))] [&_[data-title]]:!text-[hsl(var(--interactive-positive))]"}};function p(e){let{...a}=e,{theme:t="system"}=(0,r.D)();return u("error"),u("success"),u("message"),(0,i.jsx)(s.l$,{theme:t,richColors:!1,className:"toaster group",toastOptions:c,...a})}},89041:(e,a,t)=>{t.d(a,{E:()=>b});var i=t(91147),n=t(31959),r=t(1835),l=t(52808),o=t(69213),s=t(86291),d=t(99912),u=t(5701),c=t(65706),p=t(94306),m=t(40809),g=t(714),f=t(55771);function b(e){let{session:a,showArchive:t=!0,showDelete:b=!0,open:v,onOpenChange:h,side:z="bottom",align:y="end",trigger:x,triggerClassName:w}=e,[I,E]=(0,f.useState)(!1),[j,A]=(0,f.useState)(!1),{mutate:_,isPending:S}=(0,d.IV)(),{mutate:M,isPending:N}=(0,d.zI)(),{mutate:C,isPending:k}=(0,d.d$)(),{open:R}=(0,o.cL)(),{resolvedTheme:T}=(0,g.D)(),D=null!=a.archivedAt,P=void 0!==v,B=e=>{P?null==h||h(e):A(e)};return(0,f.useEffect)(()=>{let e=()=>{P?null==h||h(!1):A(!1)},a=()=>{document.hidden&&e()},t=()=>{e()};return document.addEventListener("visibilitychange",a),window.addEventListener("resize",t),()=>{document.removeEventListener("visibilitychange",a),window.removeEventListener("resize",t)}},[P,h]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.rI,{open:P?v:j,onOpenChange:B,children:[(0,i.jsx)(l.ty,{asChild:!0,children:null!=x?x:(0,i.jsx)("button",{className:null!=w?w:"text-text-tertiary hover:text-text-secondary hover:bg-surface-tertiary rounded p-1.5","aria-label":"More options",children:(0,i.jsx)(c.A,{className:"h-4 w-4"})})}),(0,i.jsxs)(l.SQ,{className:"bg-surface-floating w-48",side:z,align:y,children:[t&&D&&(0,i.jsxs)(l._2,{className:"hover:bg-surface-tertiary",disabled:N,onClick:()=>{var e,t;B(!1),M({id:a.id,title:a.title,createdAt:a.createdAt,updatedAt:a.updatedAt,mode:a.mode,modality:a.modality,modelAId:null!=(e=a.modelAId)?e:null,modelBId:null!=(t=a.modelBId)?t:null,archivedAt:null})},children:[(0,i.jsx)(p.A,{className:"h-4 w-4"}),"Unarchive"]}),t&&!D&&(0,i.jsxs)(l._2,{className:"hover:bg-surface-tertiary",disabled:S,onClick:()=>{B(!1),_(a.id),(0,s.Z)({icon:(0,i.jsx)(u.A,{className:"h-4 w-4 text-red-500"}),message:"Your previous chat history was archived",onUndo:()=>{var e,t;return M({id:a.id,title:a.title,createdAt:a.createdAt,updatedAt:a.updatedAt,mode:a.mode,modality:a.modality,modelAId:null!=(e=a.modelAId)?e:null,modelBId:null!=(t=a.modelBId)?t:null,archivedAt:null})},sidebarOpen:R,theme:T})},children:[(0,i.jsx)(u.A,{className:"h-4 w-4"}),"Archive"]}),b&&(D||!t)&&(0,i.jsxs)(l._2,{className:"hover:bg-surface-tertiary",disabled:k,onClick:()=>{B(!1),E(!0)},children:[(0,i.jsx)(m.A,{className:"h-4 w-4"}),"Delete"]})]})]}),b&&(0,i.jsx)(r.lG,{open:I,onOpenChange:E,children:(0,i.jsxs)(r.Cf,{children:[(0,i.jsxs)(r.c7,{className:"pr-6",children:[(0,i.jsx)(r.L3,{children:"Are you sure you want to delete this chat?"}),(0,i.jsx)(r.rr,{className:"pt-2",children:"This chat will be permanently deleted from our database with no way to recover it later."})]}),(0,i.jsxs)(r.Es,{children:[(0,i.jsx)(r.HM,{asChild:!0,children:(0,i.jsx)(n.Button,{variant:"outline",className:"rounded-lg",children:"No, cancel"})}),(0,i.jsx)(n.Button,{variant:"primary",className:"rounded-lg bg-red-600 hover:bg-red-700 active:bg-red-800",disabled:k,onClick:()=>{C(a.id),E(!1)},children:"Yes, delete"})]})]})})]})}},91428:(e,a,t)=>{t.d(a,{P:()=>z,EvaluationStoreProvider:()=>x,g:()=>w});var i=t(91147),n=t(24919),r=t(5849),l=t(73647),o=t(25886),s=t(85841),d=t(37995),u=t(62770),c=t(46373);async function p(e,a){try{let t=await e.evaluation[":id"].$get({param:{id:a}});if(!t.ok){let e=404===t.status?"Evaluation session not found":"Failed to fetch evaluation session";return{success:!1,error:e}}let i=c.AL.safeParse(await t.json());if(!i.success)return console.error("Invalid evaluation session data:",i.error.flatten()),{success:!1,error:"Invalid evaluation session data"};return{success:!0,data:i.data}}catch(e){return console.error("Failed to fetch evaluation session:",e),{success:!1,error:"Failed to fetch evaluation session"}}}var m=t(33592),g=t(47218),f=t(6294),b=t(55771),v=t(27069),h=t(76584);let z=(0,b.createContext)(void 0),y=["new"],x=e=>{let{children:a,initialState:t}=e,c=(0,o.a8)(),h=(0,o.rd)(),x=(0,l._P)("battles-in-direct-2"),w=(0,r.KL)(x),{modalitySlug:E,modeSlug:j}=(0,u.cp)(c),A=E?(0,u.Zg)(E):null,_=j?(0,u.$j)(j,w):n.lY.BATTLE,S=function(){let e=(0,l._P)("auto-modality-enabled");return(0,r.KL)(e)?n.Jg.AUTO:n.Jg.CHAT}(),M=_===n.lY.BATTLE,N=null!=A?A:S,C=N!==n.Jg.AUTO||M?N:n.Jg.CHAT,k=C===n.Jg.VIDEO&&_!==n.lY.BATTLE?n.lY.BATTLE:_,R="/"===c,T=(0,u.Zt)(c),D=(0,b.useCallback)(e=>{let a=(0,g.WR)(e);return!a||y.includes(a)?null:a},[])(c),P=null!=D&&(0,f.a)(D),B=null==t,O=M&&(C===n.Jg.AUTO||S===n.Jg.AUTO&&B&&null===A),[Y]=(0,b.useState)(()=>(0,m.GG)(null==t?(0,m.Oe)(k,O?n.Jg.AUTO:C,O):{...t,modality:I(t),leftVoteHoverState:null,rightVoteHoverState:null,hasViewedLatestResponses:!0,isVoteSubmitting:!1,viewedWebDevPreviews:[],didInspectBothResponsesByPairwiseFeedbackKey:{},viewedVideos:[],isPredictingModality:!1,autoModalityMetadata:void 0,activeStreamController:null,isFastModeInProgress:!1,canResampleMessages:!1,startedFromAutoMode:!1}));(0,b.useEffect)(()=>{let e=(0,g.WR)(c);if(e&&!y.includes(e)&&!(0,f.a)(e)){v.oR.error("Invalid session ID. Redirecting to home..."),h.replace("/");return}P&&null==t&&D!==Y.getState().id&&(s.z.capture({action:"session_not_found_redirect",params:{source:"initial_load_session_mismatch",session_id:D,pathname:c}}),v.oR.error("Session not found. Redirecting to home..."),h.replace("/"))},[]);let L=(0,b.useRef)({sessionId:D,pathname:c,isInitialMount:!0,modalityParam:C,modeParam:_});return(0,b.useLayoutEffect)(()=>{let e=L.current,a=D!==e.sessionId||c!==e.pathname||C!==e.modalityParam||_!==e.modeParam;if(e.isInitialMount){L.current={sessionId:D,pathname:c,isInitialMount:!1,modalityParam:C,modeParam:_};return}if(!a)return;let t=(0,g.WR)(c);if(t&&!y.includes(t)&&!(0,f.a)(t)){v.oR.error("Invalid session ID. Redirecting to home..."),h.replace("/");return}let i=P&&D!==e.sessionId;if(L.current={sessionId:D,pathname:c,isInitialMount:!1,modalityParam:C,modeParam:_},T)return void Y.setState((0,m.Oe)(k,C,C===n.Jg.AUTO));async function r(e){Y.setState({id:e,loading:!0});try{let a=await p(d.F,e);if(Y.getState().id!==e)return;if(!a.success||null==a.data){Y.setState({loading:!1});let a=Y.getState();e===a.id&&a.messages.length>0||(s.z.capture({action:"session_not_found_redirect",params:{source:"session_fetch_not_found",session_id:e,pathname:c}}),v.oR.error("Session not found. Redirecting to home..."),Y.setState((0,m.Oe)(k,C)),h.replace("/"));return}Y.setState({...a.data,modality:I(a.data),loading:!1,leftVoteHoverState:null,rightVoteHoverState:null,hasViewedLatestResponses:!0,isVoteSubmitting:!1,viewedWebDevPreviews:[],viewedVideos:[],didInspectBothResponsesByPairwiseFeedbackKey:{},autoModalityMetadata:void 0,isPredictingModality:!1,startedFromAutoMode:!1})}catch(e){throw Y.setState({loading:!1}),e}}R?(Y.getState().messages.length>0||a)&&Y.setState((0,m.Oe)(k,C,C===n.Jg.AUTO)):i?D!==Y.getState().id&&r(D):P&&D!==Y.getState().id&&r(D)},[c,D,R,P,_,k,C,Y,h,T]),(0,i.jsx)(z.Provider,{value:Y,children:a})},w=e=>{let a=(0,b.useContext)(z);if(!a)throw Error("useEvaluationStore must be used within EvaluationStoreProvider");return(0,h.P)(a,e)};function I(e){var a;let t=e.messages.find(a=>e.lastMessageIds.includes(a.id)),i=e.maskedEvaluations.find(e=>e.id===(null==t?void 0:t.evaluationId));return null!=(a=null==i?void 0:i.modality)?a:n.Jg.CHAT}},98159:(e,a,t)=>{t.d(a,{Y:()=>v,ModelStoreProvider:()=>h,g:()=>z});var i=t(91147),n=t(24919),r=t(5849),l=t(80336),o=t(67487),s=t(15392);let d={models:[]};function u(e){var a,t,i,r,s;let{models:d,modality:u,mode:c,wantedModelAId:p,wantedModelBId:m,p2lEnabled:g,featuredModels:f}=e,b=[n.lY.DIRECT,n.lY.DIRECT_BATTLE].includes(c),v=b&&g,h=d.filter(e=>(!!b||e.name!==o.qP)&&null!=e.organization&&null!=e.provider&&(u===n.Jg.IMAGE?(0,l.hK)(e):u===n.Jg.SEARCH?(0,l.cK)(e):u===n.Jg.WEBDEV?(0,l.JQ)(e):u===n.Jg.VIDEO?(0,l.D_)(e):(0,l.oN)(e))).sort((e,a)=>{var t,i,n,r,l,s,d;if(v&&e.name===o.qP)return -1;if(v&&a.name===o.qP)return 1;let c=null!=(n=null==f?void 0:f.map(e=>"string"==typeof e?e:e.modelName))?n:[];if(f&&f.length>0){let t=c.indexOf(null!=(r=e.name)?r:""),i=c.indexOf(null!=(l=a.name)?l:""),n=-1!==t,o=-1!==i;if(n&&o)return t-i;if(n&&!o)return -1;if(!n&&o)return 1}let p=null!=(s=null==(t=e.rankByModality)?void 0:t[u])?s:e.rank,m=null!=(d=null==(i=a.rankByModality)?void 0:i[u])?d:a.rank;return void 0!==p&&void 0!==m?p-m:void 0!==p?-1:+(void 0!==m)}),z=null!=(i=null==(a=h[0])?void 0:a.id)?i:null;p&&h.some(e=>e.id===p)&&(z=p);let y=null!=(r=null==(t=h[1])?void 0:t.id)?r:null;if(m&&h.some(e=>e.id===m)&&(y=m),z&&y&&z===y){let e=h.find(e=>e.id!==z);y=null!=(s=null==e?void 0:e.id)?s:null}return{modelAId:z,modelBId:y}}var c=t(27982),p=t(55771),m=t(76584),g=t(29686),f=t(91428),b=t(73647);let v=(0,p.createContext)(void 0),h=e=>{let{children:a,initialModels:t,initialModelAId:l,initialModelBId:o}=e,m=(0,b._P)("p2l-release"),h=(0,r.KL)(m),z=(0,b.qc)("model-selector-featured-models"),{messages:y,lastMessageIds:x,modality:w,mode:I,loading:E}=(0,f.g)((0,g.k)(e=>({messages:e.messages,lastMessageIds:e.lastMessageIds,modality:e.modality,mode:e.mode,loading:e.loading}))),j=(0,c.useSearchParams)().get("model"),[A]=(0,p.useState)(()=>(e=>{let{initialState:a,modality:t,mode:i,p2lEnabled:n,wantedModelAId:r,wantedModelBId:l,featuredModels:o}=e,d=u({models:a.models,mode:i,modality:t,wantedModelAId:r,wantedModelBId:l,p2lEnabled:n,featuredModels:o}),c=d.modelAId,p=d.modelBId;return(0,s.y)()((e,r)=>({...a,modelAId:c,modelBId:p,initialize:a=>e({models:a,...u({models:a,mode:i,modality:t,p2lEnabled:n,featuredModels:o})}),addModel:a=>e(e=>({models:[...e.models,a]})),updateModel:a=>e(e=>({models:e.models.map(e=>e.id===a.id?{...e,...a}:e)})),deleteModel:a=>e(e=>({models:e.models.filter(e=>e.id!==a),modelAId:e.modelAId===a?null:e.modelAId,modelBId:e.modelBId===a?null:e.modelBId})),setModelAId:a=>{a!==r().modelAId&&e({modelAId:a})},setModelBId:a=>{a!==r().modelBId&&e({modelBId:a})}}))})({initialState:t?{models:null!=t?t:[]}:d,modality:w,mode:I,p2lEnabled:h,wantedModelAId:l,wantedModelBId:o,featuredModels:z})),_=(0,p.useMemo)(()=>x.reduce((e,a)=>{let t=y.find(e=>e.id===a);return(null==t?void 0:t.participantPosition)==="a"&&t.modelId?e.modelAId=t.modelId:(null==t?void 0:t.participantPosition)==="b"&&t.modelId&&(e.modelBId=t.modelId),e},{modelAId:null,modelBId:null}),[x,y]),S=(0,p.useRef)(E);return(0,p.useEffect)(()=>{var e,a,t,i,r;let l=S.current;if(S.current=E,E)return;let o=!0===l,{modelAId:s,modelBId:d,models:c,setModelAId:p,setModelBId:m}=A.getState(),g=null;if(j){let t=c.find(e=>e.name===j),i=c.find(e=>e.id===j);g=null!=(a=null!=(e=null==t?void 0:t.id)?e:null==i?void 0:i.id)?a:null}let f=I!==n.lY.DIRECT_BATTLE,b=I===n.lY.DIRECT_BATTLE?function(e){for(let a=e.length-1;a>=0;a--){let t=e[a];if(!t||"assistant"!==t.role||!t.modelId)continue;let i=t.parentMessageIds;if(1===e.filter(e=>"assistant"===e.role&&e.parentMessageIds.some(e=>i.includes(e))).length)return t.modelId}return null}(y):null,v=u({models:c,modality:w,mode:I,wantedModelAId:null!=(i=null!=(t=null!=g?g:f?_.modelAId:null)?t:o?b:s)?i:b,wantedModelBId:null!=(r=_.modelBId)?r:o?null:d,p2lEnabled:h,featuredModels:z});v.modelAId&&p(v.modelAId),v.modelBId&&m(v.modelBId)},[_,w,A,j,I,h,z,y,E]),(0,i.jsx)(v.Provider,{value:A,children:a})},z=e=>{let a=(0,p.useContext)(v);if(!a)throw Error("useModelStore must be used within ModelStoreProvider");return(0,m.P)(a,e)}},99912:(e,a,t)=>{t.d(a,{w8:()=>h,uD:()=>z,IV:()=>f,d$:()=>g,zI:()=>b});var i=t(43161),n=t(70678),r=t(96884);let l=(0,r.createServerReference)("606d535605fbb20fd1bd23eef8c8fdbafc9cf492af",r.callServer,void 0,r.findSourceMapURL,"deleteEvaluationSession"),o=(0,r.createServerReference)("609d571bc71709bb0034a25f4b0e89f173324c5053",r.callServer,void 0,r.findSourceMapURL,"archiveEvaluationSession"),s=(0,r.createServerReference)("60a3c0fdc0f28311d5f45646d4230217d8423cb87b",r.callServer,void 0,r.findSourceMapURL,"unarchiveEvaluationSession");var d=t(25886),u=t(85841),c=t(91428),p=t(40612);let m=["history","list"],g=()=>{let e=(0,i.useQueryClient)(),a=(0,d.rd)(),t=(0,c.g)(e=>e.id),r=(0,c.g)(e=>e.mode),o=(0,c.g)(e=>e.modality),s=(0,p.kH)(e=>e.userId);return(0,n.useMutation)({mutationFn:async e=>{if(!s)throw Error("User ID is required");let a=await l(e);if(!a.success)throw Error("Failed to delete evaluation session",{cause:Error(a.error)})},onMutate:async a=>{u.z.capture({action:"chat_delete",params:{mode:r,modality:o,user_id:s,evaluation_session_id:a}}),await e.cancelQueries({queryKey:m});let t=e.getQueriesData({queryKey:m});return e.setQueriesData({queryKey:m},v(a)),{previousQueries:t}},onError:(a,t,i)=>{if(null==i?void 0:i.previousQueries)for(let[a,t]of i.previousQueries)e.setQueryData(a,t)},onSuccess:(e,i)=>{u.z.capture({action:"chat_delete_success",params:{mode:r,modality:o,user_id:s,evaluation_session_id:i}}),i===t&&a.push("/")},onSettled:async()=>{await e.invalidateQueries({queryKey:m}),await e.invalidateQueries({queryKey:["history","search"]})}})},f=()=>{let e=(0,i.useQueryClient)(),a=(0,d.rd)(),t=(0,c.g)(e=>e.id),r=(0,c.g)(e=>e.mode),l=(0,c.g)(e=>e.modality),s=(0,p.kH)(e=>e.userId);return(0,n.useMutation)({mutationFn:async e=>{if(!s)throw Error("User ID is required");let a=await o(e);if(!a.success)throw Error("Failed to archive evaluation session",{cause:Error(a.error)})},onMutate:async a=>{u.z.capture({action:"chat_archive",params:{mode:r,modality:l,user_id:s,evaluation_session_id:a}}),await e.cancelQueries({queryKey:m});let t=e.getQueriesData({queryKey:m});return e.setQueriesData({queryKey:m},v(a)),{previousQueries:t}},onError:(a,t,i)=>{if(null==i?void 0:i.previousQueries)for(let[a,t]of i.previousQueries)e.setQueryData(a,t)},onSuccess:(e,i)=>{u.z.capture({action:"chat_archive_success",params:{mode:r,modality:l,user_id:s,evaluation_session_id:i}}),i===t&&a.push("/")},onSettled:async()=>{await e.invalidateQueries({queryKey:m}),await e.invalidateQueries({queryKey:["history","search"]})}})},b=()=>{let e=(0,i.useQueryClient)(),a=(0,c.g)(e=>e.id),t=(0,c.g)(e=>e.update),r=(0,c.g)(e=>e.mode),l=(0,c.g)(e=>e.modality),o=(0,p.kH)(e=>e.userId);return(0,n.useMutation)({mutationFn:async e=>{if(!o)throw Error("User ID is required");let a=await s(e.id);if(!a.success)throw Error("Failed to unarchive evaluation session",{cause:Error(a.error)})},onMutate:async a=>{u.z.capture({action:"chat_unarchive",params:{mode:r,modality:l,user_id:o,evaluation_session_id:a.id}}),await e.cancelQueries({queryKey:m});let t=e.getQueriesData({queryKey:m});return e.setQueriesData({queryKey:m},h(a)),{previousQueries:t}},onError:(a,t,i)=>{if(null==i?void 0:i.previousQueries)for(let[a,t]of i.previousQueries)e.setQueryData(a,t)},onSuccess:(e,i)=>{u.z.capture({action:"chat_unarchive_success",params:{mode:r,modality:l,user_id:o,evaluation_session_id:i.id}}),i.id===a&&t({archivedAt:null})},onSettled:async()=>{await e.invalidateQueries({queryKey:m}),await e.invalidateQueries({queryKey:["history","search"]})}})},v=e=>a=>a?{...a,pages:a.pages.map(a=>({...a,history:a.history.filter(a=>a.id!==e)}))}:a,h=e=>a=>{var t;for(let i of null!=(t=null==a?void 0:a.pages)?t:[])if(i.history.some(a=>a.id===e.id))return a;return a?{...a,pages:a.pages.map((a,t)=>0===t?{...a,history:[e,...a.history]}:a)}:{pageParams:[null],pages:[{history:[e],pagination:{cursor:null,hasMore:!1,limit:1}}]}},z=e=>a=>a?{...a,pages:a.pages.map(a=>{let t=a.history.findIndex(a=>a.id===e.id);if(-1===t)return a;let i=[...a.history],n=i[t];return i[t]={...n,...e},{...a,history:i}})}:a}}]);
//# chunkId=019c97ba-c8aa-7a21-8c16-a9abe5235d81